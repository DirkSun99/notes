## Parallel Scavenge收集器

Parallel Scavenge 收集器是Java虚拟机中垃圾收集器的一种。

* **特性**

	Parallel Scavenge收集器是一个**新生代收集器**，它也是使用**复制算法**的收集器，又是并行的多线程收集器。

	Parallel Scavenge收集器的关注点与其他收集器不同，Parallel Scavengen收集器的目标则是**达到一个可控制的吞吐量（Throughput）**

	吞吐量：CPU用于运行用户代码时间与CPU消耗的总时间的比值

	吞吐量 = (执行用户代码时间) / (执行用户代码时间 + 垃圾回收所占用的时间)

* **应用场景**

	主要适合在后台运算而不是太多交互的任务。

	需要与用户交互的程序，良好的响应速度能提升用户体验；而高吞吐量则可以高效率地利用CPU时间，尽快完成程序的运算任务等。

* **重要参数**

	* `-XX:MaxGCPauseMillis`：控制最大垃圾收集停顿时间

		MaxGCPauseMillis参数允许的值是一个大于0的毫秒数，收集器将尽力保证内存回收花费的时候不超过设定值。但并不是把这个参数值设置得越小，垃圾回收速度越快，**GC停顿时间缩短是以牺牲吞吐量和新生代空间来换取的**：系统把新生代调小一些，这也直接导致垃圾收集发生得更频繁一些。比如原来新生代大小为500M，每10s收集一次、每次停顿100ms，现在将新生代调整为300M,变成每5s收集一次，每次停顿70ms。停顿时间的确在下降，但吞吐量也降下来了。

	* `-XX:GCTimeRatio`：设置吞吐量大小

		GCTimeRatio参数的值应该是一个大于0小于100的整数，也就是垃圾收集时间占总时间的比率，相当于是吞吐量的倒数。如何把此值设置为19，那允许的最大GC时间就占总时间的5%（即 1/(1+19) ），默认值为99，就是允许最大1%（即 1/(1+99) ）垃圾收集时间。

	* `-XX:+UseAdaptiveSizePolicy`：开头参数

		UseAdaptiveSizePolicy是一个开关参数，当这个参数打开之后，就不需要手工指定新生代的大小（-Xmn）、Eden与Survivor区的比例（-XX:SurvivorRatio）、晋升老年代对象年龄（-XX:PretenureSizeThreshold）等细节参数了，虚拟机会根据当前系统的运行情况收集性能监控信息，动态调整这些参数以提供最合适的停顿时间或最大的吞吐量，这种调节方式称为GC自适应的调节策略（GC Ergonomics）。

* **自适应调节策略**

	Parallell Scavenge收集器能够配合自适应调节策略，把内存管理的调优任务交给虚拟机去完成。只需要把基本的内存数据设置好（如-Xmx设置最大堆），然后使用MaxGCPauseMillis参数（更关注最大停顿时间）或GCTimeRatio（更关注吞吐量）给虚拟机设立一个优化目标，那具体细节参数的调节工作就由虚拟机完成了。自适应调节策略也是Parallel Scavenge收集器与ParNew收集器的一个重要区别。
