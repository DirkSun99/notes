## 直接内存

* 概述

	直接内存并不是虚拟机运行时数据区的一部分，也不是Java虚拟机规范中定义的内存区域。在JDK 1.4中新加入了NIO (New Input/Output)类，引入了一种基于通道(Channel)与缓冲区(Buffer)的 I/O 方式，它可以使用 native 函数库直接分配堆外内存，然后通过一个存储在 Java 堆中的 DirectByteBuffer 对象作为这块内存的引用进行操作。这样能在一些场景中显著提高性能，因为避免了在 Java 堆和 Native 堆中来回复制数据。

	* 本机直接内存的分配不会受到 Java 堆大小的限制，受到本机总内存大小限制
	* 配置虚拟机参数时，不要忽略直接内存，防止出现OutOfMemoryError异常

* 直接内存(堆外内存)与堆内存比较

	* 直接内存申请空间耗费更高的性能，当频繁申请到一定量时尤为明显
	* 直接内存IO读写的性能要优于普通的堆内存，在多次读写操作的情况下差异明显

* 直接内存使用场景
	* 有很大的数据需要存储，它的生命周期很长
	* 适合频繁的IO操作，例如网络并发场景